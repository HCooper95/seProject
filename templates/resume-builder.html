{% extends "base.html" %}
{% load staticfiles %}

{% block content %}
	<div class="resume-builder">
		<form class="rb-form" method="post" action="{% url 'resume-builder' %}">
			{% csrf_token %}

			<style>
				.existing {
					display: flex;
					flex-direction: column;
				}
			</style>
			<div id="education-form">
				<h3>Education</h3>
				<div class="existing">
					{% for i in existing.education %}
						<div class="existing-section">
							{{ i }}
						</div>
					{% endfor %}
				</div>

				{% for form in education_formset %}
					<div class="education-form-section">
						{{ form }}
					</div>
				{% endfor %}
			</div>

			<div id="experience-form">
				<h3>Experience</h3>
				<div class="existing">
					{% for i in existing.experience %}
						<div class="existing-section">
							{{ i }}
						</div>
					{% endfor %}
				</div>
				{% for form in experience_formset %}
					<div class="experience-form-section">
						{{ form }}
					</div>
				{% endfor %}
			</div>

			<div id="skills-form">
				<h3>Skills</h3>
				<div class="existing">
					{% for i in existing.skills %}
						<div class="existing-section">
							{{ i }}
						</div>
					{% endfor %}
				</div>
				{% for form in skills_formset %}
					<div class="skills-form-section">
						{{ form }}
					</div>
				{% endfor %}
			</div>

			<div id="awards-form">
				<h3>Awards</h3>
				<div class="existing">
					{% for i in existing.awards %}
						<div class="existing-section">
							{{ i }}
						</div>
					{% endfor %}
				</div>
				{% for form in awards_formset %}
					<div class="awards-form-section">
						{{ form }}
					</div>
				{% endfor %}
			</div>

			<div class="resume-builder-btn">
				<input type="submit" class="btn" value="Save"/>
			</div>

			<style>label{display: none;}</style>
			{{ education_formset.management_form }}
			{{ experience_formset.management_form }}
			{{ awards_formset.management_form }}
			{{ skills_formset.management_form }}
		</form>
	</div>
{% endblock content %}

{% block scripts %}
	<script>
		// Keep forms in order they're rendered.
	    $(function() {
	        $('#education-form .education-form-section').formset({prefix: 'education'});
	        $('#experience-form .experience-form-section').formset({prefix: 'experience'});
		    $('#skills-form .skills-form-section').formset({prefix: 'skills'});
	        $('#awards-form .awards-form-section').formset({prefix: 'awards'});
	    })
	</script>
{% endblock %}
